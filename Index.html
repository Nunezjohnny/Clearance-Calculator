<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Clearance - Find Your Breathing Room</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: #7c3aed;
      cursor: pointer;
    }
    input[type="range"]::-moz-range-thumb {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: #7c3aed;
      cursor: pointer;
      border: none;
    }
  </style>
</head>
<body>
  <div id="root"></div>
  
  <script type="text/babel">
    const { useState } = React;
    const { DollarSign, TrendingUp, Zap, AlertCircle, ChevronRight, RotateCcw, CheckCircle, ChevronDown, ChevronUp } = lucide;

    function ClearanceCalculator() {
      const [step, setStep] = useState(1);
      const [showAdvanced, setShowAdvanced] = useState(false);
      
      const [income, setIncome] = useState('');
      const [payFrequency, setPayFrequency] = useState('monthly');
      
      const [rent, setRent] = useState('');
      const [utilities, setUtilities] = useState('');
      const [debt, setDebt] = useState('');
      const [groceries, setGroceries] = useState('');
      const [gas, setGas] = useState('');
      const [subscriptions, setSubscriptions] = useState('');
      
      const [insurance, setInsurance] = useState('');
      const [otherFixed, setOtherFixed] = useState('');
      const [eatingOut, setEatingOut] = useState('');
      const [shopping, setShopping] = useState('');
      const [entertainment, setEntertainment] = useState('');
      const [otherVariable, setOtherVariable] = useState('');
      
      const [newSubscriptions, setNewSubscriptions] = useState(null);
      const [newEatingOut, setNewEatingOut] = useState(null);
      const [newShopping, setNewShopping] = useState(null);
      const [newGas, setNewGas] = useState(null);
      const [newEntertainment, setNewEntertainment] = useState(null);
      const [avoidFees, setAvoidFees] = useState(0);
      const [negotiateBills, setNegotiateBills] = useState(0);
      const [sideIncome, setSideIncome] = useState(0);
      
      const [commitments, setCommitments] = useState([]);

      const fmt = (n) => new Intl.NumberFormat('en-US', { maximumFractionDigits: 0 }).format(n);

      const getMonthlyIncome = () => {
        const amount = parseFloat(income) || 0;
        if (payFrequency === 'biweekly') return amount * 26 / 12;
        if (payFrequency === 'twice-monthly') return amount * 2;
        return amount;
      };

      const monthlyIncome = getMonthlyIncome();
      
      const totalFixed = 
        (parseFloat(rent) || 0) +
        (parseFloat(utilities) || 0) +
        (parseFloat(debt) || 0) +
        (parseFloat(insurance) || 0) +
        (parseFloat(otherFixed) || 0);
      
      const currentGas = parseFloat(gas) || 0;
      const currentGroceries = parseFloat(groceries) || 0;
      const currentSubscriptions = parseFloat(subscriptions) || 0;
      const currentEatingOut = parseFloat(eatingOut) || 0;
      const currentShopping = parseFloat(shopping) || 0;
      const currentEntertainment = parseFloat(entertainment) || 0;
      const currentOtherVariable = parseFloat(otherVariable) || 0;
      
      const totalVariable = currentGas + currentGroceries + currentSubscriptions + 
        currentEatingOut + currentShopping + currentEntertainment + currentOtherVariable;
      
      const baselineClearance = monthlyIncome - totalFixed - totalVariable;
      
      const activeLevers = [
        newSubscriptions !== null && newSubscriptions < currentSubscriptions,
        newEatingOut !== null && newEatingOut < currentEatingOut,
        newShopping !== null && newShopping < currentShopping,
        newGas !== null && newGas < currentGas,
        newEntertainment !== null && newEntertainment < currentEntertainment,
        avoidFees > 0,
        negotiateBills > 0,
        sideIncome > 0
      ].filter(Boolean).length;
      
      const subsSavings = newSubscriptions !== null ? (currentSubscriptions - newSubscriptions) : 0;
      const eatingOutSavings = newEatingOut !== null ? (currentEatingOut - newEatingOut) : 0;
      const shoppingSavings = newShopping !== null ? (currentShopping - newShopping) : 0;
      const gasSavings = newGas !== null ? (currentGas - newGas) : 0;
      const entertainmentSavings = newEntertainment !== null ? (currentEntertainment - newEntertainment) : 0;
      
      const totalSavings = subsSavings + eatingOutSavings + shoppingSavings + 
        gasSavings + entertainmentSavings + avoidFees + negotiateBills;
      
      const newClearance = baselineClearance + totalSavings + sideIncome;
      const improvement = newClearance - baselineClearance;

      const hasCompleteInputs = monthlyIncome > 0 && (totalFixed > 0 || totalVariable > 0);

      const fillAverage = (setter, avg) => {
        setter(avg.toString());
      };

      const resetLevers = () => {
        setNewSubscriptions(null);
        setNewEatingOut(null);
        setNewShopping(null);
        setNewGas(null);
        setNewEntertainment(null);
        setAvoidFees(0);
        setNegotiateBills(0);
        setSideIncome(0);
        setCommitments([]);
      };

      const toggleCommitment = (leverName) => {
        if (commitments.includes(leverName)) {
          setCommitments(commitments.filter(c => c !== leverName));
        } else {
          setCommitments([...commitments, leverName]);
        }
      };

      // REST OF THE CODE CONTINUES...
      // (I'll provide the complete file in the artifact below)
      
      return <div>Component code here</div>;
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<ClearanceCalculator />);
  </script>
</body>
</html>
